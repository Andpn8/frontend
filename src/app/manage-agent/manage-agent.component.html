<app-navbar 
  [helpMessage]="'Qui √® dove potrai <strong>amministrare</strong> tutti gli agenti immobiliari.'" 
  [centerMessage]="'<strong>Terminale amministrativo</strong>'">
</app-navbar>

<div class="manage-container">
  <div class="sidebar">
    <p><strong>RUOLO:</strong> <span>{{ currentUserRole === 'Amministratore' ? 'Amministratore' : 'CEO' }}</span></p>
    <p><strong>PERMESSI:</strong> 
      <span [ngClass]="{
        'limited': currentUserRole === 'Amministratore',
        'ceo': currentUserRole === 'CEO'
      }">{{ currentUserRole === 'CEO' ? 'TOTALI' : 'Limitati' }}</span>
    </p>
    <p><strong>AGENTI TOTALI:</strong> <span>{{ totalAgents }}</span></p>
    <p><strong>ADMIN TOTALI:</strong> <span>{{ totalAdmins }}</span></p>
    <button class="back-btn" (click)="goBack()">‚Üê Torna indietro</button>
  </div>

  <div class="agent-list">
    <h2>LISTA AGENTI IMMOBILIARI E AMMINISTRATORI</h2>

    <table>
      <thead>
        <tr>
          <th>N¬∞</th>
          <th>ASSUNTO IL</th>
          <th>NOME</th>
          <th>RUOLO</th>
          <th>OPERAZIONI</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let agent of paginatedAgents; let i = index">
          <td>{{ (currentPage - 1) * itemsPerPage + i + 1 }}</td>
          <td>{{ agent.hiredDate || 'ND' }}</td>
          <td>{{ agent.name }}</td>
          <td>{{ agent.role }}</td>
          <td>
            <button class="promote" [disabled]="agent.role !== 'Agente'">
              Promuovi
              <span *ngIf="agent.role !== 'Agente'" class="lock">üîí</span>
            </button>
            <button class="fire" [disabled]="agent.role === 'Amministratore'">
              Licenzia
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="pagination">
      <button (click)="prevPage()" [disabled]="currentPage === 1">‚Üê</button>
      <button *ngFor="let page of [].constructor(totalPages); let i = index"
              (click)="setPage(i + 1)"
              [class.active]="currentPage === i + 1">{{ i + 1 }}</button>
      <button (click)="nextPage()" [disabled]="currentPage === totalPages">‚Üí</button>
    </div>
  </div>

  <app-footer></app-footer>
</div>
